### 第13章 int指令

#### 13.1 int指令
    CPU执行int n指令,相当于引发一个n号中断的中断过程.
    1>取中断类型码n
    2>标志寄存器入栈,IF = 0, TF = 0 
    3>CS,IP 入栈
    4>(IP) = (n * 4),(CS) = (n*4 + 2)

#### 13.2 编写供应用程序调用的中断例程
    编写、安装中断7ch的中断例程
    求 2 * 3456^2 的值
    assume cs:code 
    code segment 
    start: mov ax,cs 
           mov ds,ax 
           mov si, offset sqr 
           mov ax,0 
           mov es,ax 
           mov di,200h 
           mov cx,offset sqrend - offset sqr 
           cld 
           rep movsb 

           mov ax, 0 
           mov es,ax 
           mov word ptr es:[7ch*4],200h 
           mov word ptr es:[7ch*4+2],0 

           mov ax,4c00h 
           int 21h 

    sqr:   mul ax 
           iret 
    
    sqrend: nop 
    code ends 
    end start 

    iret相当于 pop IP, pop CS, popf 

#### 13.3 对int、iret和栈的深入理解
    用7ch 中断例程完成loop指令的功能
    assume cs:code
    code segment 
        start:  mov ax,0b800h 
                mov es,ax 
                mov di,160 * 12 

                mov bx, offset s - offset se 
                mov cx,80 
            s:  mov byte ptr es:[di],'!'
                add di,2 
                int 7ch 
            se: nop 

        lp: push bp 
            mov bp,sp 
            dec cx
            jcxzz lpret 
            add [bp+2],bx 
    lpret:  pop bp 
            iret 
        
#### 13.4 BIOS 和 DOS 所提供的中断例程
    和硬件设备相关的DOS中断例程中，一般都调用了BIOS的中断例程

#### BIOS 和 DOS 中断例程的安装过程
    1> 开机后,CPU一加电，初始化(CS) = 0FFFFH,(IP) = 0, 自动从FFFF:0 单元开始执行程序。
    FFFF:0 处有一条跳转指令，CPU执行该指令后，转去执行BIOS中的硬件系统检测和初始化程序。
    2> 初始化程序将建立BIOS所支持的中断向量,即将BIOS提供的中断例程的入口地址登记在中断
    向量表中。注意，对于BIOS所提供的中断例程，只需将入口地址登记在中断向量表中即可,因为
    它们是固化到ROM中的程序，一直在内存中存在。
    3> 硬件系统检测和初始化完成后，调用int 19h 进行操作系统的引导。从此将计算机交给操作
    系统控制。
    4> DOS启动后，除完成其他工作外,还将它所提供的中断例程装入内存，并建立相应的中断向量。

#### 13.6 BIOS中断例程应用 
    
#### 13.7 DOS中断例程
